<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Westminster Pints Exchange</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css?v=23">
</head>

<body>

  <!-- HEADER -->
  <header class="top-header">
    <h1>ğŸ» Westminster Pints Exchange</h1>
    <p class="subtitle">Real-time pint prices across Westminster Village</p>
  </header>

  <!-- CHEAPEST PINT BANNER -->
  <section id="cheapestBanner" class="cheapest-banner">
    <div id="cheapestBannerText">Finding cheapest pintâ€¦</div>
  </section>

  <!-- METRICS -->
  <section class="metric-row">
    <div class="metric-card">
      <h3>ğŸº Most Popular Today</h3>
      <div id="popularPintValue" class="metric-small">â€”</div>
    </div>

    <div class="metric-card">
      <h3>ğŸ“Š Top Types This Week</h3>
      <div id="weeklyTypesValue" class="metric-small">â€”</div>
    </div>
  </section>

  <!-- TICKER -->
  <section id="liveTicker" class="ticker">
    <div id="tickerText">Loading market activityâ€¦</div>
  </section>

  <!-- MAIN CONTENT -->
  <main class="content">

    <!-- ADD PINT PRICE -->
    <section class="card" id="addPintCard">
      <h2>ğŸº Add Pint Price</h2>

      <label>Pub:</label>
      <select id="pintPubSelect"></select>

      <label>Pint Name:</label>
      <select id="pintNameSelect"></select>

      <label>Pint Type:</label>
      <select id="pintTypeSelect">
        <option value="Lager">Lager</option>
        <option value="Ale">Ale</option>
        <option value="IPA">IPA</option>
        <option value="Cider">Cider</option>
        <option value="Guinness">Guinness</option>
      </select>

      <label>Price (Â£):</label>
      <input id="pintPriceInput" type="number" step="0.01">

      <button id="addPintPriceBtn">Add Pint Price ğŸ’·</button>
    </section>

    <!-- ADD PINT NAME -->
    <section class="card" id="addPintNameCard">
      <h2>â• Add New Pint Name</h2>
      <input id="newPintNameInput" placeholder="e.g. Peroni">
      <button id="addPintNameBtn">Add Pint Name ğŸº</button>
    </section>

    <!-- ADD PUB -->
    <section class="card" id="addPubCard">
      <h2>â• Add Pub</h2>
      <input id="pubNameInput" placeholder="Pub name">
      <button id="addPubBtn">Add Pub ğŸ›ï¸</button>
    </section>

    <!-- CHEAPEST BY PINT NAME -->
    <section class="card" id="cheapestByPintCard">
      <h2>ğŸ” Cheapest Pint by Name</h2>

      <label>Select Pint:</label>
      <select id="cheapestPintSelect"></select>

      <div id="cheapestPintResult" class="subnote" style="margin-top:10px;">â€”</div>
    </section>

    <!-- BUDGET PLANNER -->
    <section class="card" id="budgetPlannerCard">
      <h2>ğŸ’° Budget Planner</h2>

      <label>Your Budget (Â£):</label>
      <input id="budgetInput" type="number">

      <label>Max Price Per Pint (Â£):</label>
      <input id="budgetMaxInput" type="number">

      <button id="runBudgetBtn">Find Best Pub ğŸ¯</button>

      <div id="budgetResult" class="subnote" style="margin-top:12px;">Enter a budget to begin.</div>
    </section>

    <!-- TWO COLUMNS -->
    <div class="columns">

      <!-- LEFT COLUMN -->
      <div class="col-left">

        <section class="card" id="pinxCard">
          <h2>ğŸ“ˆ PINX Market Summary</h2>
          <div id="pinxValue" class="metric">â€”</div>
          <div id="moneyInvestedInline" class="metric-small">â€”</div>
          <p class="subnote">PINX tracks average pint price across Westminster.</p>
        </section>

      </div>

      <!-- RIGHT COLUMN -->
      <div class="col-right">

        <!-- PUB LEAGUE -->
        <section class="card" id="pubLeagueCard">
          <h2>ğŸ“Š Pub League Table</h2>

          <label>Filter by Pint Type:</label>
          <select id="leagueFilter">
            <option value="all">All Types</option>
            <option value="Lager">Lager</option>
            <option value="Ale">Ale</option>
            <option value="IPA">IPA</option>
            <option value="Cider">Cider</option>
            <option value="Guinness">Guinness</option>
          </select>

          <label>Filter by Pint Name:</label>
          <select id="leaguePintName"></select>

          <h3>Top 5 Cheapest</h3>
          <table class="league-table" id="cheapestTable"></table>

          <h3>Top 5 Most Expensive</h3>
          <table class="league-table" id="expensiveTable"></table>

          <button id="showAllPubsBtn">Show Full League â–¼</button>
          <table class="league-table" id="fullLeagueTable" style="display:none;"></table>
        </section>

        <!-- DRINKS MENU -->
        <section class="card" id="drinksMenuCard">
          <h2>ğŸ“œ Drinks Menu</h2>

          <label>Select Pub:</label>
          <select id="drinksMenuSelect"></select>

          <table id="drinksMenuTable" class="drinks-table"></table>
        </section>

        <!-- NEW CARD 1: Swing-o-Meter -->
        <section class="card" id="swingCard">
          <h2>ğŸ—³ï¸ Pint Availability Swing-o-Meter</h2>
          <p class="subnote">Which pints gained or lost availability this week.</p>
          <table id="swingTable" class="swing-table"></table>
        </section>

        <!-- NEW CARD 2: Pint Clusters -->
        <section class="card" id="clusterCard">
          <h2>ğŸ“Š Pint Cluster Detector</h2>
          <p class="subnote">Automatic price tier grouping based on Westminster data.</p>
          <div id="clusterContent"></div>
        </section>

        <!-- NEW CARD 3: Rarity Key -->
        <section class="card" id="rarityCard">
          <h2>ğŸ’ Pint Rarity Key</h2>
          <ul class="rarity-list">
            <li>ğŸº Common (10+ pubs)</li>
            <li>â­ Popular (6â€“9 pubs)</li>
            <li>ğŸ”¶ Limited (3â€“5 pubs)</li>
            <li>ğŸŸ¥ Rare (1â€“2 pubs)</li>
            <li>âŒ Not Sold</li>
          </ul>
        </section>

        <!-- RECENT SUBMISSIONS -->
        <section class="card" id="recentFeedCard">
          <h2>ğŸ“° Recent Submissions</h2>
          <div id="recentFeed"></div>
        </section>

      </div>
    </div>
  </main>

  <!-- MOBILE NAV -->
  <nav class="bottom-nav">
    <div class="nav-item" onclick="scrollToId('addPintCard')">ğŸº<div>Add</div></div>
    <div class="nav-item" onclick="scrollToId('pubLeagueCard')">ğŸ“Š<div>League</div></div>
    <div class="nav-item" onclick="scrollToId('drinksMenuCard')">ğŸ“œ<div>Menu</div></div>
    <div class="nav-item" onclick="scrollToId('swingCard')">ğŸ—³ï¸<div>Swing</div></div>
    <div class="nav-item" onclick="scrollToId('recentFeedCard')">ğŸ“°<div>Feed</div></div>
  </nav>

  <!-- MODAL POPUP FOR "VIEW THESE PUBS" -->
  <div id="pubModal" class="modal">
    <div class="modal-content">
      <span id="modalClose" class="modal-close">&times;</span>
      <h2 id="modalTitle"></h2>
      <ul id="modalPubList"></ul>
    </div>
  </div>

  <!-- TOAST -->
  <div id="toast" class="toast"></div>

  <!-- JS -->
  <script type="module" src="app.js?v=23"></script>
  <script>
    function scrollToId(id){
      document.getElementById(id).scrollIntoView({behavior:"smooth"});
    }
  </script>

</body>
</html>
