<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Westminster Pints Exchange</title>
  <link rel="stylesheet" href="styles.css?v=4">
</head>

<body>

  <!-- DESKTOP NAV -->
  <nav class="top-nav-desktop">
    <div onclick="scrollToSection('budgetHelper')">ğŸ‘› Budget</div>
    <div onclick="scrollToSection('pollingIntent')">ğŸ—³ï¸ Polling</div>
    <div onclick="scrollToSection('addPintCard')">ğŸº Add Pint</div>
    <div onclick="scrollToSection('pubLeague')">ğŸ“Š League</div>
    <div onclick="scrollToSection('recentFeed')">ğŸ“° Feed</div>
  </nav>

  <!-- HEADER -->
  <header class="top-header">
    <h1>ğŸ» Westminster Pints Exchange</h1>
    <p class="subtitle">Real-time pint prices across the Westminster Village</p>
  </header>

  <!-- GRID WRAPPER -->
  <main id="grid">

    <!-- LEFT COLUMN -->
    <section class="col">

      <!-- Budget Helper -->
      <div class="card" id="budgetHelper">
        <h2>ğŸ‘› Pint Budget Helper</h2>
        <label>Your Daily Budget:</label>
        <input id="budgetInput" type="number" placeholder="Â£ (e.g. 15)">
        <label>Maximum Price Per Pint:</label>
        <input id="maxPriceInput" type="number" placeholder="Â£ (e.g. 6)">
        <button id="saveBudgetBtn">Save Budget Settings</button>
        <div id="budgetResults" class="budget-output"></div>
      </div>

      <!-- Cheapest Pint -->
      <div class="card" id="cheapestCard">
        <h2>ğŸ† Cheapest Pint Right Now</h2>
        <div id="cheapestTop" class="metric">Loading...</div>
      </div>

      <!-- Add Pint -->
      <div class="card" id="addPintCard">
        <h2>ğŸº Add Pint Price</h2>
        <select id="pintPubSelect"></select>
        <input id="pintNameInput" placeholder="Pint name (e.g. Peroni)">
        <select id="pintTypeSelect">
          <option value="Lager">ğŸº Lager</option>
          <option value="Ale">ğŸ» Ale</option>
          <option value="IPA">ğŸŸ¢ IPA</option>
          <option value="Guinness">âš« Guinness</option>
          <option value="Cider">ğŸŸ¡ Cider</option>
        </select>
        <input id="pintPriceInput" type="number" step="0.01" placeholder="Price (Â£)">
        <button id="addPintBtn">Add Price ğŸ’·</button>
      </div>

    </section>

    <!-- RIGHT COLUMN -->
    <section class="col">

      <!-- PINX -->
      <div class="card" id="pinxCard">
        <h2>ğŸ“ˆ PINX Index</h2>
        <div id="pinxValue" class="metric">Loading...</div>
      </div>

      <!-- Add Pub -->
      <div class="card" id="addPubCard">
        <h2>â• Add Pub</h2>
        <input id="pubNameInput" placeholder="Pub name">
        <button id="addPubBtn">Add Pub ğŸ›ï¸</button>
      </div>

      <!-- Polling Intent -->
      <div class="card" id="pollingIntent">
        <h2>ğŸ—³ï¸ Pint Polling Intent</h2>
        <div id="pollingBars"></div>
        <div id="pollingLeader" class="polling-leader"></div>
      </div>

    </section>

    <!-- FULL WIDTH BELOW -->
    <section class="col-full">
      <div class="card" id="miniStats">
        <h2>ğŸ“Š Market Mini-Stats</h2>
        <div id="miniStatsContent"></div>
      </div>

      <div class="card full-width" id="pubLeague">
        <h2>ğŸ“Š Pub League</h2>
        <label>Filter League by Pint Type:</label>
        <select id="leagueFilter">
          <option value="all">All Types</option>
          <option value="Lager">Lager</option>
          <option value="Ale">Ale</option>
          <option value="IPA">IPA</option>
          <option value="Guinness">Guinness</option>
          <option value="Cider">Cider</option>
        </select>
        <select id="leagueMode">
          <option value="cheapest">Cheapest</option>
          <option value="drops">Biggest Drops</option>
          <option value="rises">Biggest Rises</option>
        </select>
        <div id="pubTiles" class="pub-tiles-grid"></div>
      </div>

      <div class="card" id="recentFeed">
        <h2>ğŸ“° Recent Submissions</h2>
        <div id="recentFeedContent"></div>
      </div>

      <div class="card" id="goodInvestmentsSection">
        <h2>ğŸ’¡ Good Investments</h2>
        <div id="goodInvestments"></div>
      </div>
    </section>

  </main>

  <!-- Admin -->
  <div id="adminToggle">âš™ï¸ Admin: OFF</div>
  <section id="adminPanel" class="card" style="display:none;">
    <h2>ğŸ› ï¸ Admin Panel</h2>
    <div id="adminContent"></div>
  </section>

  <!-- Toast -->
  <div id="flashToast" class="flash-toast"></div>

  <!-- MOBILE NAV -->
  <nav class="bottom-nav">
    <div onclick="scrollToSection('budgetHelper')" class="nav-item">ğŸ‘›<div>Budget</div></div>
    <div onclick="scrollToSection('pollingIntent')" class="nav-item">ğŸ—³ï¸<div>Polls</div></div>
    <div onclick="scrollToSection('addPintCard')" class="nav-item">ğŸº<div>Add</div></div>
    <div onclick="scrollToSection('pubLeague')" class="nav-item">ğŸ“Š<div>League</div></div>
    <div onclick="scrollToSection('recentFeed')" class="nav-item">ğŸ“°<div>Feed</div></div>
  </nav>

  <!-- JS With Cache-Buster -->
  <script type="module" src="app.js?v=4"></script>

  <script>
    function scrollToSection(id){
      document.getElementById(id).scrollIntoView({ behavior: "smooth" });
    }
  </script>

</body>
</html>
